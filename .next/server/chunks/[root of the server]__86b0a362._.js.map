{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file://C%3A/node/selink/src/app/api/image-proxy/route.ts"],"sourcesContent":["\nimport { type NextRequest, NextResponse } from 'next/server';\n\nexport async function GET(request: NextRequest) {\n  const { searchParams } = new URL(request.url);\n  const imageUrl = searchParams.get('url');\n\n  if (!imageUrl) {\n    return new NextResponse('URL parameter is missing', { status: 400 });\n  }\n\n  try {\n    new URL(imageUrl);\n  } catch (error) {\n    return new NextResponse('Invalid URL parameter', { status: 400 });\n  }\n\n  try {\n    const response = await fetch(imageUrl, {\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36',\n      }\n    });\n\n    if (!response.ok) {\n      console.error(`Failed to fetch image via proxy: ${imageUrl}, status: ${response.status}`);\n      return new NextResponse(null, { status: response.status }); // Return null body with original error status\n    }\n\n    const imageBuffer = await response.arrayBuffer();\n    const contentType = response.headers.get('content-type') || 'image/jpeg'; \n\n    return new NextResponse(imageBuffer, {\n      headers: {\n        'Content-Type': contentType,\n        'Cache-Control': 'public, max-age=86400, immutable', \n      },\n    });\n  } catch (error) {\n    console.error(`Error proxying image ${imageUrl}:`, error);\n    return new NextResponse(null, { status: 500 }); // Return null body for generic server errors\n  }\n}\n"],"names":[],"mappings":";;;AACA;;AAEO,eAAe,IAAI,OAAoB;IAC5C,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,WAAW,aAAa,GAAG,CAAC;IAElC,IAAI,CAAC,UAAU;QACb,OAAO,IAAI,gIAAA,CAAA,eAAY,CAAC,4BAA4B;YAAE,QAAQ;QAAI;IACpE;IAEA,IAAI;QACF,IAAI,IAAI;IACV,EAAE,OAAO,OAAO;QACd,OAAO,IAAI,gIAAA,CAAA,eAAY,CAAC,yBAAyB;YAAE,QAAQ;QAAI;IACjE;IAEA,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,UAAU;YACrC,SAAS;gBACP,cAAc;YAChB;QACF;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,QAAQ,KAAK,CAAC,CAAC,iCAAiC,EAAE,SAAS,UAAU,EAAE,SAAS,MAAM,EAAE;YACxF,OAAO,IAAI,gIAAA,CAAA,eAAY,CAAC,MAAM;gBAAE,QAAQ,SAAS,MAAM;YAAC,IAAI,8CAA8C;QAC5G;QAEA,MAAM,cAAc,MAAM,SAAS,WAAW;QAC9C,MAAM,cAAc,SAAS,OAAO,CAAC,GAAG,CAAC,mBAAmB;QAE5D,OAAO,IAAI,gIAAA,CAAA,eAAY,CAAC,aAAa;YACnC,SAAS;gBACP,gBAAgB;gBAChB,iBAAiB;YACnB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,qBAAqB,EAAE,SAAS,CAAC,CAAC,EAAE;QACnD,OAAO,IAAI,gIAAA,CAAA,eAAY,CAAC,MAAM;YAAE,QAAQ;QAAI,IAAI,6CAA6C;IAC/F;AACF","debugId":null}}]
}